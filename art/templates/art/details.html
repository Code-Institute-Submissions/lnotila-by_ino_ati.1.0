{% extends "base.html" %}
{% load static %}

{% block content%}
<div class="container">
    <div class="row">
        <div class="col">
            <h1 class=" text-center welcome-text mt-3 mb-3">{{details.title}}</h1>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <img class="card-img" src="{{ details.art_image.url }}"
                alt="a picture of art work by artist inotila nghaamwa">
        </div>
        <div class="col  text-center">
            <h2>Details about art piece</h2>
            <p>Media:</p>
            <p>{{details.media}}</p>
            <br>
            <p>Framed:</p>
            {% if details.framed %}
            <p>Yes</p>
            {% else %}
            <p>No</p>
            {% endif %}
            <br>
            <p>{{details.size}}</p>
            <br>
            <p>Size:</p>
            <p>{{details.size}}</p>
            <br>
            <p>Completed:</p>
            <p>{{details.date_completed}}</p>
            <br>
            <p>price:</p>
            <p>{{details.price}} SEK</p>

            
            {% if request.user.is_authenticated %}
                {% if bag_items %}
                    {% if details.id|lower in art_ids|lower %}
                        <p>Painting is already in your bag</p>
                        <a href="{% url 'checkout' %}" id="after-add-to-bag-btn"class="btn homepage-btn">Go to checkout</a>
                    {% else %}
                        <form action="{% url 'add_to_bag' details.id %}" method="POST" id="add_to_bag_form">
                            {% csrf_token %}
                            <input type="submit" id="add-to-bag-btn" class="btn homepage-btn text-uppercase"
                                data-art_id="{{ details.id }}" value="Add to Bag">
                            <input type="hidden" name="redirect_url" value="{{ request.path }}">
                        </form>
                    {% endif %}
                {% else %}
                <form action="{% url 'add_to_bag' details.id %}" method="POST" id="add_to_bag_form">
                    {% csrf_token %}
                    <input type="submit" id="add-to-bag-btn" class="btn homepage-btn text-uppercase"
                        data-art_id="{{ details.id }}" value="Add to Bag">
                    <input type="hidden" name="redirect_url" value="{{ request.path }}">
                </form>
                {% endif %}
            {% else %}
            <strong>
                <p><a href="" class="override-a-defualt"> Sign-up</a> or <a href="" class="override-a-defualt">login</a>
                    to purchase this piece</p>
            </strong>
            {% endif %}
        </div>
    </div>
</div>
</div>
<!-- <script>
    userAddedToCart();
    var addedToCart = true;
    console.log(addedToCart);
    
    function userAddedToCart() {
        document.getElementById("add-to-bag-btn").addEventListener("click", function (event) {
            event.target.style.backgroundColor = "#fff";
            console.log(addedToCart);
            document.getElementById("add-to-bag-btn").hidden = true;
            document.getElementById("after-add-to-bag-btn").hidden = false;
        });
    }
</script> -->
{% endblock %}